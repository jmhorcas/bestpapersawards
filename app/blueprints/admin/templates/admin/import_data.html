{% extends 'base.html' %}

{% block content %}
    <h2>Import data from .csv</h2>
    <form action="{{ url_for('admin.import_data') }}" method="POST" enctype="multipart/form-data" class="row g-3 needs-validation" novalidate>
        <div class="row gy-1">
            <div class="col-sm-3">
                <label for="data_file" class="form-label">File (csv)</label>
                <input type="file" class="form-control" name="data_file" id="data_file"/>
                <div class="invalid-feedback">
                    The file is required.
                </div>
            </div>
        </div>
        <div class="row gy-1">
            <div class="col-sm-1">
                <input type="submit" class="btn btn-primary" name="load" value="Load data" required>
            </div>
            <div class="col-sm-5">
                {% with messages = get_flashed_messages(with_categories=true) %}
                    {% for category, message in messages %}
                        {% if category == "info" %}
                            <div class="alert alert-success" role="alert">{{ message }}</div>
                        {% endif %}
                        {% if category == "warning" %}
                            <div class="alert alert-warning" role="alert">{{ message }}</div>
                        {% endif %}
                        {% if category == "error" %}
                            <div class="alert alert-danger" role="alert">{{ message }}</div>
                        {% endif %}
                    {% endfor %}
                {% endwith %}
            </div>
        </div>
    </form>
{% endblock %}

{% block scripts %}
    <!-- Validation form -->
    <script src="{{url_for('add_paper.static', filename='js/form_validation.js')}}"></script>
{% endblock %}